{% extends "base.html" %}
{% block content %}
  <h1>Создать заказ</h1>

  <form method="post" class="форма" action="/заказы/создать">

    <h3 style="margin: 12px 0;">Гость (ввод вручную)</h3>

    <label class="поле">
      <span class="подпись">Фамилия</span>
      <input name="guest_last_name" type="text" required>
    </label>

    <label class="поле">
      <span class="подпись">Имя</span>
      <input name="guest_first_name" type="text" required>
    </label>

    <label class="поле">
      <span class="подпись">Отчество</span>
      <input name="guest_middle_name" type="text">
    </label>

    <h3 style="margin: 12px 0;">Аккаунт (опционально)</h3>

    <input type="hidden" name="create_user" value="0">
    <label class="поле">
      <span class="подпись">Создать аккаунт?</span>
      <input name="create_user" type="checkbox" value="1">
    </label>

    <label class="поле">
      <span class="подпись">Логин</span>
      <input name="login" type="text" placeholder="например: ivanov_ivan">
    </label>

    <label class="поле">
      <span class="подпись">Пароль</span>
      <input name="password" type="password" maxlength="72" placeholder="Введите пароль для аккаунта">
      <div class="плашка">Пароль будет автоматически захэширован перед сохранением.</div>
    </label>

    <label class="поле">
      <span class="подпись">Роль</span>
      <select name="role">
        <option value="user" selected>user</option>
        <option value="admin">admin</option>
      </select>
    </label>

    <h3 style="margin: 12px 0;">Параметры заказа</h3>

    <label class="поле">
      <span class="подпись">Стол</span>
      <select name="table_id">
        <option value="">—</option>
        {% for t in tables %}
          <option value="{{ t.id }}">№{{ t.table_number }}</option>
        {% endfor %}
      </select>
    </label>

    <label class="поле">
      <span class="подпись">Официант</span>
      <select name="waiter_id">
        <option value="">—</option>
        {% for w in waiters %}
          <option value="{{ w.id }}">{{ w.last_name }} {{ w.first_name }}</option>
        {% endfor %}
      </select>
    </label>

    <label class="поле">
      <span class="подпись">Сумма</span>
      <input name="total_amount" type="number" step="0.01" min="0" value="0" required>
    </label>

    <label class="поле">
      <span class="подпись">Статус</span>
      <select name="status" required>
        <option value="создан" selected>создан</option>
        <option value="оплачен">оплачен</option>
        <option value="отменён">отменён</option>
      </select>
    </label>

    <label class="поле">
      <span class="подпись">Бронирование (если есть)</span>
      <input name="booking_id" type="number" min="1">
    </label>

    <button class="кнопка" type="submit">Создать заказ</button>
  </form>
{% endblock %}
