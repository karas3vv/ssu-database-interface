{% extends "base.html" %}

{% block content %}
  <h1>Профиль</h1>

  <div class="плашка" style="display:flex; gap:16px; align-items:center;">
    <div style="width:56px;height:56px;border-radius:50%;display:grid;place-items:center;font-weight:700;">
      {{ user.login[0]|upper }}
    </div>
    <div>
      <div><b>{{ user.login }}</b></div>
      <div style="opacity:.8;">Роль: {{ "Администратор" if user.role == "admin" else "Пользователь" }}</div>
    </div>
  </div>

  {% if user.role != "admin" %}
    <div class="плашка" style="margin-top:12px;">
      Заказов: {{ stats.orders_count }}<br>
      Потрачено: {{ stats.total_spent }}
    </div>

    <h2 style="margin-top:16px;">Мои заказы</h2>
    {% if orders %}
      <table class="таблица">
        <thead>
          <tr><th>ID</th><th>Время</th><th>Сумма</th><th>Статус</th></tr>
        </thead>
        <tbody>
          {% for o in orders %}
            <tr>
              <td>{{ o.id }}</td>
              <td>{{ o.order_time }}</td>
              <td>{{ o.total_amount }}</td>
              <td>{{ o.status }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div class="плашка">Заказов пока нет.</div>
    {% endif %}
  {% endif %}
{% endblock %}
